"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[2943],{69733:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var a=n(87462),r=n(29439),l=n(30624),o=n.n(l),i=n(45237),c=n(6202),s=n(63540),u=n(48794),m=n(31257),f=n(63035),p=n(66678),d=n(59837),h=n(11608),v=n(49827),b=n(15040),y=n(90459),E=n(36722),g=n(95645),w=n(20697),x=n(52587),Z=n(92156),T=n(32642),k=n(62410),P=n(56682),_=n(23349),C=n(40825),D=n(53352),O=function(){return(O=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},I=["description","modified"],N={isFetching:!1},V=function(e,t){switch(t.type){case"setFetching":return O(O({},e),{isFetching:t.payload})}return e};const F=function(e){var t,n,a=e.name,r=e.id,c=e.updateData,s=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["name","id","updateData"]),u=(0,_.Z)(),m=(0,i.useDispatch)(),p=(0,l.useReducer)(V,N),d=p[0].isFetching,F=p[1];return o().createElement(b.GalleryItem,null,o().createElement(x.r,{key:r,ouiaId:"platform-"+r},o().createElement(b.CardHeader,null,o().createElement(y.$h,null,o().createElement(y.Gh,null,o().createElement(T.Z,{height:40,sourceId:r})),o().createElement(b.Tooltip,{content:o().createElement(b.Text,null,u(D.Z.refreshTooltip))},o().createElement(b.Button,{id:"refresh-platform-"+r,ouiaId:"refresh-platform-"+r,variant:"link",onClick:function(){return function(e){var t;F({type:"setFetching",payload:!0}),Promise.resolve(m((null===(t=window.catalog)||void 0===t?void 0:t.standalone)?(0,v.TP)(e):(0,h.TP)(e))).then((function(){return e=void 0,t=void 0,a=function(){return function(e,t){var n,a,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(l){return function(i){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,a=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){o.label=l[1];break}if(6===l[0]&&o.label<r[1]){o.label=r[1],r=l;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(l);break}r[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}}(this,(function(e){switch(e.label){case 0:return[4,(0,f.gw)(1e4)];case 1:return e.sent(),F({type:"setFetching",payload:!1}),c(),[2]}}))},new((n=void 0)||(n=Promise))((function(r,l){function o(e){try{c(a.next(e))}catch(e){l(e)}}function i(e){try{c(a.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}));var e,t,n,a}))}(r)},isDisabled:d},d?o().createElement(C.SyncAltIcon,{key:"refresh-"+r,color:"grey"}):o().createElement(C.SyncAltIcon,{key:"refresh-"+r,color:"blue"}))))),o().createElement(Z.k,null,o().createElement(b.TextContent,null,o().createElement(w.Z,{pathname:E.d2,searchParams:{platform:r}},o().createElement(b.Text,{title:a,className:"pf-u-mb-0",component:b.TextVariants.h3},o().createElement(g.Z,null,a))),d?o().createElement(b.TextContent,{className:"pf-u-mb-md"},o().createElement(b.Text,{component:b.TextVariants.small,className:"pf-u-mb-0"},"Retrieving data....  ")):s.last_successful_refresh_at&&o().createElement(b.TextContent,{className:"pf-u-mb-md"},o().createElement(b.Text,{component:b.TextVariants.small,className:"pf-u-mb-0"},"Last refreshed  ",o().createElement(k.Z,{date:s.last_successful_refresh_at,type:"relative"}))),s.info&&o().createElement(b.TextContent,{className:"pf-u-mb-md"},o().createElement(b.Text,{component:b.TextVariants.small,className:"pf-u-mb-0"},u(D.Z.platformVersion)),o().createElement(b.Text,{component:b.TextVariants.small,className:"pf-u-mb-0"},null===(t=null==s?void 0:s.info)||void 0===t?void 0:t.version),o().createElement(b.Text,{component:b.TextVariants.small,className:"pf-u-mb-0"},u(D.Z.ansibleVersion)),o().createElement(b.Text,{component:b.TextVariants.small,className:"pf-u-mb-0"},null===(n=null==s?void 0:s.info)||void 0===n?void 0:n.ansible_version))),o().createElement(y.ZP,O({},O({name:a},s),{toDisplay:I}))),o().createElement(b.CardFooter,null,o().createElement(b.Label,{variant:"filled",color:"available"===s.availability_status?"green":"red"},"available"===s.availability_status?u(P.Z.available):u(P.Z.notAvailable)))))};var S=n(12700),j=n(33188),L=n(72510),R=n(97881),A=n(35388);const G=function(){var e,t=(0,_.Z)(),n=(0,l.useState)(""),b=(0,r.Z)(n,2),y=b[0],E=b[1],g=(0,i.useSelector)((function(e){var t=e.platformReducer;return{platforms:t.platforms,isLoading:t.isPlatformDataLoading}})),w=g.platforms,x=g.isLoading,Z=(0,i.useDispatch)();(0,l.useContext)(L.Z).userIdentity.identity.user.is_org_admin,(0,l.useEffect)((function(){var e;Z(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,v.dw)():(0,h.dw)()),(0,f.k3)()}),[]);var T=null!==(e=window.catalog)&&void 0!==e&&e.standalone?w.results:w,k=T?{items:null==T?void 0:T.map((function(e){return o().createElement(F,(0,a.Z)({ouiaId:"platform-".concat(e.id),key:e.id},e,{updateData:function(){var e;return Z(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,v.dw)():(0,h.dw)())}}))})),isLoading:x&&0===T.length}:{},P={PrimaryAction:y&&""!==y?function(){return o().createElement(c.Button,{ouiaId:"clear-filter",variant:"link",onClick:function(){return E("")}},t(R.Z.clearFilters))}:void 0,title:t(y&&""!==y?R.Z.noResults:D.Z.noPlatforms),description:y&&""!==y?t(R.Z.noResultsDescription):o().createElement(s.Text,{id:"platform_doc_url",component:s.TextVariants.p},t(D.Z.platformsNoDataDescription),"  ",o().createElement("a",{href:A.qb,target:"_blank",rel:"noopener noreferrer"},t(D.Z.platformsDocTitle))),Icon:y&&""!==y?u.ZP:m.ZP};return o().createElement(l.Fragment,null,o().createElement(p.Z,{schema:(0,S.qG)({onFilterChange:function(e){return E(e)},searchValue:y,title:t(D.Z.title)})}),o().createElement(d.Z,(0,a.Z)({},k,{renderEmptyState:function(){return o().createElement(j.Z,P)}})))}}}]);
//# sourceMappingURL=../sourcemaps/platforms.c77c4dff4408a9beead3850b574b57f1.js.map