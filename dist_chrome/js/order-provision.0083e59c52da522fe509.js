"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[6267],{17281:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(30624),l=r.n(n),a=r(45237),s=r(15040),c=r(41436),o=r(79074),i=r(2482),u=r(40229),m=r(23349),d=r(31644),p=r(42413),f=r(62410),E=r(55171),g=r.n(E);const v=function(e){var t=e.orderItem,r=e.progressMessages,n=e.formatMessage;return l().createElement(s.Grid,{hasGutter:!0},l().createElement(s.GridItem,{md:12,lg:6,xl:4},l().createElement(s.Stack,{hasGutter:!0},l().createElement(s.StackItem,null,l().createElement(s.Card,null,l().createElement(s.CardBody,null,l().createElement(s.TextContent,null,l().createElement(s.Text,{className:"pf-u-mb-md",component:s.TextVariants.h2},n(u.Z.orderItemParameters))),(null==t?void 0:t.service_parameters)&&l().createElement(g(),{src:t.service_parameters})))))),l().createElement(s.GridItem,{md:12,lg:6,xl:8},l().createElement(s.Card,null,l().createElement(s.CardBody,null,l().createElement(s.TextContent,null,l().createElement(s.Text,{className:"pf-u-mb-md",component:s.TextVariants.h2},n(u.Z.orderProgressMessages))),l().createElement(g(),{src:r})))))};var x=r(72510),T=r(63035),h=function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},y=function(e,t,r){if(r||2===arguments.length)for(var n,l=0,a=t.length;l<a;l++)!n&&l in t||(n||(n=Array.prototype.slice.call(t,0,l)),n[l]=t[l]);return e.concat(n||Array.prototype.slice.call(t))};const b=function(){var e=(0,m.Z)(),t=(0,n.useState)(!0),r=t[0],E=t[1],g=(0,a.useDispatch)(),b=(0,a.useSelector)((function(e){return e.orderReducer.orderDetail})).order,C=(0,a.useSelector)((function(e){return e.orderReducer.orderProvision})),I=(0,n.useContext)(x.Z).permissions,Z=(0,T.Fs)(I,["catalog:order_processes:link"]);if(!r&&function(e){return!e||!e.orderItems||0===e.orderItems.length}(C))return l().createElement(s.Bullseye,{id:"no-order-provision"},l().createElement(s.Flex,{direction:{default:"column"},grow:{default:"grow"}},l().createElement(s.Bullseye,null,l().createElement(o.ZP,{size:"xl"})),l().createElement(s.Bullseye,null,l().createElement(s.Title,{headingLevel:"h1",size:"2xl"},e(u.Z.noOrderProvision)))));var B=[{title:"Updated",cellFormatters:Z?[c.expandable]:[]},{title:"Type"},{title:"Activity"},{title:""}],O=function(e,t){var r,n=(0,d.C)(e.state);return{id:e.id,isOpen:!1,cells:[{title:l().createElement(s.Text,{className:"pf-u-mb-0",component:s.TextVariants.small},l().createElement(f.Z,{date:e.updated_at,type:"exact"}))},{title:l().createElement(s.Text,{className:"pf-u-mb-0",component:s.TextVariants.small},l().createElement(c.TableText,null,(r=e.process_scope||t(u.Z.defaultOrderItemType),(null==r?void 0:r.charAt(0).toUpperCase())+(null==r?void 0:r.slice(1)))))},{title:l().createElement(s.Text,{className:"pf-u-mb-0",component:s.TextVariants.small},l().createElement(c.TableText,null,e.name))},{title:l().createElement(c.TableText,null,l().createElement(s.TextContent,{style:{color:p.Z[e.state].color}},p.Z[e.state].icon,"Â ",t(d.Z[n])))}]}},M=function(){return C.orderItems.reduce((function(t,r,n){var a=function(e,t,r){var n=[O(e,t)];if(Z&&C.progressMessageItems&&C.progressMessageItems.length>0){var a=C.progressMessageItems.find((function(t){return t.orderItemId===e.id}));a&&n.push(function(e,t,r,n){return{parent:2*n,cells:[{title:l().createElement(v,{orderItem:e,progressMessages:t,formatMessage:r})}]}}(e,a.progressMessages,t,r))}return n}(r,e,n);return y(y([],t,!0),a,!0)}),[])},w=(0,n.useState)(M()),P=w[0],k=w[1];return(0,n.useEffect)((function(){E(!0),Promise.all([g((0,i.zr)(b.id))]).then((function(){return E(!1)}))}),[]),(0,n.useEffect)((function(){k(M())}),[null==C?void 0:C.orderItems]),l().createElement(s.TextContent,null,r?l().createElement(s.Bullseye,null,l().createElement(s.Flex,{direction:{default:"column"},grow:{default:"grow"}},l().createElement(s.Bullseye,{id:"fetching-order-provision"},l().createElement(s.Title,{headingLevel:"h1",size:"xl"},e(u.Z.fetchingOrderProvision))),l().createElement(s.Bullseye,null,l().createElement(s.Spinner,{size:"xl"})))):l().createElement(s.Card,null,l().createElement(s.CardBody,null,l().createElement(s.Text,{className:"pf-u-mb-md",component:s.TextVariants.h2},e(u.Z.activity)),l().createElement(c.Table,{"aria-label":"Order provisioning activity",cells:B,rows:P,onCollapse:Z?function(e,t,r,n){var l,a,s=(l=P,a=n.id,l.map((function(e){return e.id===a?h(h({},e),{isOpen:!e.isOpen}):h({},e)})));k(s)}:void 0},l().createElement(c.TableHeader,null),l().createElement(c.TableBody,null)))))}}}]);
//# sourceMappingURL=../sourcemaps/order-provision.fb1b1718103db4011f29133cabd71258.js.map