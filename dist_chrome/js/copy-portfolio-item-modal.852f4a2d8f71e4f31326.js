"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[7506],{18792:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var o=n(30624),a=n.n(o),r=n(45237),i=n(334),l=n(15040),u=n(30137),c=n(15654),s=n(89231),f=n(77503),p=n(81624),d=n(83629),m=(n(73712),n(36722)),h=n(7579),v=n(56682),b=n(64466),w=n(23349),y=function(e){return(0,d.vV)({name:e},{limit:100,offset:0}).then((function(e){return e.data?e.data.filter((function(e){return e.metadata.user_capabilities.update})).map((function(e){var t=e.name;return{value:e.id,label:t}})):[]}))},_=function(e,t,n){return{fields:[{component:"copy-name-display",name:"portfolio_item_name",label:t(v.Z.name),getName:e,fieldSpy:"portfolio_id"},{component:"initial-select",name:"portfolio_id",label:t(v.Z.portfolio),isRequired:!0,loadOptions:(0,p.Z)(y),isSearchable:!0,options:n,menuIsPortal:!0}]}};const g=function(e){var t=e.portfolioId,n=e.portfolioItemId,o=e.closeUrl,p=e.search,d=e.portfolioName,v=(0,w.Z)(),y=(0,r.useDispatch)(),g=(0,i.useHistory)().push;return a().createElement(l.Modal,{isOpen:!0,title:v(b.Z.copyItemTitle),onClose:function(){return g({pathname:o,search:p})},variant:"small"},a().createElement(u.ZP,{initialValues:{portfolio_id:t},schema:_((function(e){return(0,c.HK)().getPortfolioItemNextName(n,e).then((function(e){return e.next_name}))}),v,[{value:t,label:d}]),onSubmit:function(e){return o=void 0,a=void 0,i=function(){var o,a,r;return function(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}}(this,(function(i){switch(i.label){case 0:return[4,y((null===(a=window.catalog)||void 0===a?void 0:a.standalone)?(0,f.al)(e.portfolio_id):(0,s.al)(e.portfolio_id))];case 1:return o=i.sent().value,[2,y((null===(r=window.catalog)||void 0===r?void 0:r.standalone)?(0,f.$I)(n,e,o):(0,s.$I)(n,e,o)).then((function(t){var n=t.id,o=t.service_offering_source_ref;return g({pathname:m.YJ,search:"?portfolio="+e.portfolio_id+"&portfolio-item="+n+"&source="+o})})).then((function(){var n;return e.portfolio_id===t&&y((null===(n=window.catalog)||void 0===n?void 0:n.standalone)?(0,f.cP)(t):(0,s.cP)(t))}))]}}))},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{u(i.next(e))}catch(e){t(e)}}function l(e){try{u(i.throw(e))}catch(e){t(e)}}function u(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r((function(e){e(o)}))).then(n,l)}u((i=i.apply(o,a||[])).next())}));var o,a,r,i},onCancel:function(){return g({pathname:o,search:p})},templateProps:{submitLabel:v(h.Z.save),disableSubmit:["validating","submitting"]}}))}}}]);
//# sourceMappingURL=../sourcemaps/copy-portfolio-item-modal.1b07fe3e509f08d626c15eb8a9148971.js.map