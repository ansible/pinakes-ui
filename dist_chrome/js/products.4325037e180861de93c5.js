"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[2893],{1797:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var r=n(87462),o=n(29439),a=n(4942),i=n(30624),l=n.n(i),c=n(45237),u=n(2112),s=n(48794),d=n(89231),p=n(77503),f=n(63035),m=n(59797),g=n(91703),y=n(77172);const v=function(e){var t=e.meta,n=e.fetchProducts,r=e.isLoading,o=e.filterProps,a=o.searchValue,i=o.onFilterChange,l=o.placeholder;return{fields:[{component:g.H.TOP_TOOLBAR,key:"products-top-toolbar",fields:[{component:g.H.TOP_TOOLBAR_TITLE,key:"products-toolbar-title",title:"Products",description:"All products collected from your portfolios",noData:t.noData},{component:g.H.LEVEL,key:"Products-actions",fields:t.noData?[]:[{component:g.H.TOOLBAR,key:"main-portfolio-toolbar",fields:[{groupName:"filter-group",component:g.H.FILTER_TOOLBAR_ITEM,key:"filter-input",searchValue:a,onFilterChange:i,placeholder:l,isClearable:!0}]},{component:g.H.LEVEL_ITEM,key:"pagination-item",fields:t.count>0?[{component:y.Z,key:"products-pagination",meta:t,apiProps:a,apiRequest:n,isDisabled:r,isCompact:!0}]:[]}]}]}]}};var h=n(66678),E=n(7247),O=n(59837),P=n(11608),Z=n(49827),b=n(81624),w=n(33188),F=n(6202),_=n(20018),D=n(63540),T=n(63853),k=n(36722),L=n(92183),V=n(44058),C=n(72510),R=n(97881);const j=(0,n(50049).vU)({addSource:{id:"products.empty.add-source",defaultMessage:"Add source"},configureSource:{id:"products.empty.configure-source",defaultMessage:"Configure a source and add products into portfolios."},title:{id:"products.toolbar.title",defaultMessage:"Products"}});var I=n(53352),S=n(23349);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=(0,b.Z)((function(e,t,n){var r;n(!0),t(null!==(r=window.catalog)&&void 0!==r&&r.standalone?(0,p._r)(e,E.he):(0,d._r)(e,E.he)).then((function(){return n(!1)}))}),1e3),H={filterValue:"",isOpen:!1,isFetching:!0,isFiltering:!1},M=function(e,t){switch(t.type){case"setFetching":return A(A({},e),{},{isFetching:t.payload});case"setFilterValue":return A(A({},e),{},{filterValue:t.payload});case"setFilteringFlag":return A(A({},e),{},{isFiltering:t.payload})}return e};const q=function(){var e,t,n=(0,S.Z)(),a=(0,V.Z)(),g=(0,i.useContext)(T.Z).release,E=(0,i.useReducer)(M,A(A({},H),{},{filterValue:(null==a||null===(e=a.products)||void 0===e?void 0:e.filter)||""})),b=(0,o.Z)(E,2),x=b[0],q=x.isFetching,J=x.filterValue,U=x.isFiltering,Y=b[1],N=(0,i.useContext)(C.Z).userIdentity.identity.user.is_org_admin,z=(0,c.useDispatch)(),G=(0,c.useSelector)((function(e){return e.portfolioReducer.portfolioItems})),K=G.meta||{count:G.count},Q=G.data||G.results;(0,i.useEffect)((function(){var e,t,n,r;Promise.all([z(null!==(e=window.catalog)&&void 0!==e&&e.standalone?(0,p._r)(null==a||null===(t=a.products)||void 0===t?void 0:t.filter,null==a?void 0:a.products):(0,d._r)(null==a||null===(n=a.products)||void 0===n?void 0:n.filter,null==a?void 0:a.products)),z(null!==(r=window.catalog)&&void 0!==r&&r.standalone?(0,Z.dw)():P.dw)]).then((function(){return Y({type:"setFetching",payload:!1})})),(0,f.k3)()}),[]);var W=function(e){Y({type:"setFilterValue",payload:e}),B(e,z,(function(e){return Y({type:"setFilteringFlag",payload:e})}))},X=Q.map((function(e){return l().createElement(m.Z,(0,r.Z)({key:e.id,pathname:e.portfolio_id&&k.YJ},(n=(t=e).portfolio_id,o=t.id,a=t.service_offering_source_ref,n&&o&&a?{pathname:n&&k.YJ,searchParams:{portfolio:n,"portfolio-item":o,source:a,"from-products":"true"}}:{}),e,{toDisplay:[]}));var t,n,o,a})),$={PrimaryAction:K.noData?function(){return N&&l().createElement("a",{href:"".concat(g,"settings/sources/new")},l().createElement(F.Button,{ouiaId:"add-source",variant:"primary"},n(j.addSource)))}:function(){return l().createElement(F.Button,{ouiaId:"clear-filter",variant:"link",onClick:function(){return W("")}},n(R.Z.clearFilters))},title:K.noData?n(R.Z.noProducts):n(R.Z.noResults),renderDescription:function(){return l().createElement(i.Fragment,null,l().createElement(_.TextContent,null,l().createElement(D.Text,{component:D.TextVariants.p},K.noData?n(j.configureSource):n(R.Z.noResultsDescription)),N?l().createElement(D.Text,{component:D.TextVariants.p},n(I.Z.connectSource,{a:function(e){return l().createElement(i.Fragment,null,l().createElement("a",{href:"".concat(document.baseURI,"settings/sources")},e))}})):l().createElement(D.Text,null,n(I.Z.contactAdmin))))},Icon:K.noData?u.ZP:s.ZP};return l().createElement(i.Fragment,null,l().createElement(h.Z,{schema:v({filterProps:{searchValue:J,onFilterChange:W,placeholder:n(R.Z.filterByProduct)},title:n(j.title),isLoading:U||q,meta:K,fetchProducts:null!==(t=window.catalog)&&void 0!==t&&t.standalone?function(){return z(p._r.apply(void 0,arguments))}:function(){return z(d._r.apply(void 0,arguments))}})}),l().createElement(O.Z,{isLoading:U||q,items:X,renderEmptyState:function(){return l().createElement(w.Z,$)}}),K.count>0&&l().createElement(L.Z,null,l().createElement(y.Z,{dropDirection:"up",meta:K,apiRequest:function(e,t){var n,r,o;return z(null!==(n=window.catalog)&&void 0!==n&&n.standalone?(0,p._r)(null==a||null===(r=a.products)||void 0===r?void 0:r.filter,t):(0,d._r)(null==a||null===(o=a.products)||void 0===o?void 0:o.filter,t))}})))}}}]);
//# sourceMappingURL=../sourcemaps/products.7f86c8ccd7b90db3b0708b0be84e0d73.js.map