"use strict";(self.webpackChunkcatalog=self.webpackChunkcatalog||[]).push([[3452],{3452:(e,o,t)=>{t.r(o),t.d(o,{default:()=>J});var r=t(4942),i=t(87462),n=t(29439),a=t(30624),l=t.n(a),s=t(45697),c=t.n(s),p=t(334),u=t(45237),d=t(66678),f=t(22910),m=t(92512),P=t(47962),h=t(96823),y=t(91703),g=t(56824),b=t(77172),v=t(20697),O=t(21976),R=t(23349),k=t(29751),E=t(36722);function w(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function I(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?w(Object(t),!0).forEach((function(o){(0,r.Z)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var Z=function(e){var o=e.editPortfolioRoute,t=e.workflowPortfolioRoute,r=e.removePortfolioRoute,i=e.copyInProgress,s=e.copyPortfolio,c=e.userCapabilities,p=e.canLinkOrderProcesses,u=(0,a.useState)(!1),d=(0,n.Z)(u,2),y=d[0],g=d[1],b=(0,R.Z)(),O=[];if(null!=c&&c.update&&O.push(l().createElement(h.h,{"aria-label":"Edit Portfolio",key:"edit-portfolio",id:"edit-portfolio",component:l().createElement(v.Z,{id:"edit-portfolio",preserveSearch:!0,pathname:o},"Edit"),role:"link"})),null!=c&&c.copy&&O.push(l().createElement(h.h,{component:"button","aria-label":"Copy Portfolio",key:"copy-portfolio",id:"copy-portfolio",onClick:s},"Copy")),null!=c&&c.set_approval&&O.push(l().createElement(h.h,{"aria-label":"Set approval workflow",key:"set-approval-portfolio-action",id:"set-approval-portfolio-action",component:l().createElement(v.Z,{preserveSearch:!0,pathname:t},"Set approval"),role:"link"})),null!=c&&c.update&&p){var w=b(k.Z.setOrderProcess);O.push(l().createElement(h.h,{"aria-label":w,key:"attach-order-processes",id:"attach-order-processes",component:l().createElement(v.Z,{preserveSearch:!0,pathname:E.OI},w),role:"link"}))}return null!=c&&c.destroy&&O.push(l().createElement(h.h,{"aria-label":"Remove Portfolio",key:"delete-portfolio",id:"delete-portfolio",component:l().createElement(v.Z,{preserveSearch:!0,pathname:r},"Delete"),role:"link",className:"pf-c-dropdown__menu-item"})),0===O.length?null:l().createElement(f.L,{className:"pf-u-ml-md",onSelect:function(){return g(!1)},position:m.DropdownPosition.right,toggle:l().createElement(P.a,{id:"toggle-portfolio-actions",onToggle:g,isDisabled:i}),isOpen:y,isPlain:!0,dropdownItems:O})};Z.propTypes={removePortfolioRoute:c().string.isRequired,editPortfolioRoute:c().string.isRequired,workflowPortfolioRoute:c().string.isRequired,copyPortfolio:c().func.isRequired,copyInProgress:c().bool,userCapabilities:c().shape({copy:c().bool,update:c().bool,destroy:c().bool,set_approval:c().bool}).isRequired,canLinkOrderProcesses:c().bool};const D=function(e){var o=e.title,t=e.addProductsRoute,r=e.copyPortfolio,i=e.sharePortfolioRoute,n=e.editPortfolioRoute,a=e.workflowPortfolioRoute,l=e.removePortfolioRoute,s=e.copyInProgress,c=e.isLoading,p=e.removeProducts,u=e.itemsSelected,d=e.meta,f=e.fetchPortfolioItemsWithPortfolio,m=e.portfolioId,P=e.description,h=e.fromProducts,v=e.filterProps,R=v.searchValue,k=v.onFilterChange,E=v.placeholder,w=e.userCapabilities,D=e.canLinkOrderProcesses;return{fields:[{component:y.H.TOP_TOOLBAR,breadcrumbs:!h,key:"portfolio-top-toolbar",fields:[{key:"back-to-products",hidden:!h,component:O.Z},{component:y.H.TOP_TOOLBAR_TITLE,key:"portfolio-toolbar-title",noData:null==d?void 0:d.noData,title:o,description:P,fields:[{component:y.H.TOOLBAR,key:"portfolio-actions",noWrap:!0,fields:[(0,g.g)({pathname:i,preserveSearch:!0,variant:"secondary",title:"Share",isDisabled:s,key:"portfolio-share-button",id:"portfolio-share-button",hidden:!(null!=w&&w.share||null!=w&&w.unshare)}),{component:y.H.TOOLBAR_ITEM,key:"portfolio-actions-dropdown-item",fields:[{component:Z,editPortfolioRoute:n,workflowPortfolioRoute:a,removePortfolioRoute:l,copyPortfolio:r,copyInProgress:s,userCapabilities:w,canLinkOrderProcesses:D,key:"portfolio-actions-dropdown"}]}]}]},{component:y.H.LEVEL,key:"portfolio-items-actions",fields:null!=d&&d.noData?[]:[{component:y.H.TOOLBAR,key:"portfolio-items-actions",fields:[{groupName:"filter-portfolio-items",component:y.H.FILTER_TOOLBAR_ITEM,isClearable:!0,key:"portfolio-items-filter",searchValue:R,onFilterChange:k,placeholder:E},I({hidden:!(null!=w&&w.update),groupName:"add-portfolio-items",key:"portfolio-items-add-group"},(0,g.g)({preserveSearch:!0,pathname:t,isDisabled:c||s,variant:"primary",title:"Add",id:"add-products-button",key:"add-products-button"})),{component:y.H.TOOLBAR_ITEM,key:"remove-products-item",hidden:0===d.count||!(null!=w&&w.update),fields:[{component:y.H.BUTTON,groupName:"remove-portfolio-items",variant:"link",title:"Remove",key:"remove-products-button",id:"remove-products-button",isDisabled:!u,onClick:p}]}]},{component:y.H.LEVEL_ITEM,key:"pagination-item",fields:d.count>0?[{component:b.Z,key:"portfolio-items-pagination",meta:d,apiRequest:f,apiProps:m,isCompact:!0}]:[]}]}]}]}};var C=t(48794),S=t(20777),T=t(33188),j=t(6202),L=t(97881),_=t(64466),q=function(e){var o=e.url,t=e.handleFilterChange,r=e.meta,i=e.userCapabilities.update,n=(0,R.Z)(),a={PrimaryAction:null!=r&&r.noData?function(){return l().createElement(T._,{url:o,label:n(_.Z.addProducts),id:"add-products-to-portfolio",hasPermission:i})}:function(){return l().createElement(j.Button,{id:"clear-portfolio-filter",ouiaId:"clear-portfolio-filter",variant:"link",onClick:function(){return t("")}},n(L.Z.clearFilters))},title:null!=r&&r.noData?n(L.Z.noProducts):n(L.Z.noResults),description:null!=r&&r.noData?n(_.Z.emptyNoProducts):n(L.Z.noResultsDescription),Icon:null!=r&&r.noData?S.ZP:C.ZP};return l().createElement(T.Z,a)};q.propTypes={url:c().string.isRequired,handleFilterChange:c().func.isRequired,meta:c().shape({noData:c().bool}).isRequired,userCapabilities:c().shape({update:c().bool}).isRequired};const F=q;var B=t(59837),H=t(59797),A=t(89231),V=t(77503),N=t(92183),M=t(47786),W=t(72510),x=t(63035);function U(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function z(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?U(Object(t),!0).forEach((function(o){(0,r.Z)(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var G=function(e){var o,t=e.routes,r=e.handleFilterChange,s=e.removeProducts,c=e.copyPortfolio,f=e.stateDispatch,m=e.fromProducts,P=e.state,h=P.removeInProgress,y=P.isFetching,g=P.isFiltering,v=P.copyInProgress,O=P.selectedItems,k=P.filterValue,w=(0,R.Z)(),I=(0,u.useSelector)((function(e){var o=e.portfolioReducer,t=o.portfolioItems,r=t.data,i=t.results,n=t.meta,a=t.count,l=o.selectedPortfolio;return{data:r,results:i,meta:n,count:a,name:l.name,description:l.description,metadata:l.metadata}})),Z=I.data,C=I.results,S=I.meta,T=I.count,j=I.name,_=I.description,q=I.metadata,U=(0,p.useRouteMatch)(E.hT).url,G=(0,M.Z)(["portfolio"]),J=(0,n.Z)(G,1)[0].portfolio,K=(0,u.useDispatch)(),Q=(0,a.useContext)(W.Z).permissions,X=(0,x.Fs)(Q,["catalog:order_processes:link"]),Y=Z||C,$=S||{count:T},ee=null!==(o=window.catalog)&&void 0!==o&&o.standalone?{show:!0,update:!0,set_approval:!0,share:!0,unshare:!0,untag:!0,tag:!0,set_order_process:!0,create:!0,destroy:!0,restore:!0,copy:!0}:null==q?void 0:q.user_capabilities,oe=Y.map((function(e){return l().createElement(H.Z,(0,i.Z)({key:e.id},e,{pathname:"".concat(U,"/portfolio-item"),searchParams:{source:e.service_offering_source_ref,"portfolio-item":e.id},preserveSearch:!0,isSelectable:null==ee?void 0:ee.update,onSelect:function(o){return f({type:"selectItem",payload:{selectedItem:o,product:e}})},isSelected:O.includes(e.id),removeInProgress:h}))}));return l().createElement(a.Fragment,null,l().createElement(d.Z,{schema:D(z(z({fromProducts:m,filterProps:{searchValue:k,onFilterChange:r,placeholder:w(L.Z.filterByProduct)},title:j,description:_},t),{},{copyPortfolio:c,isLoading:y||g,copyInProgress:v,removeProducts:function(){return s(O)},itemsSelected:O.length>0,meta:$,fetchPortfolioItemsWithPortfolio:function(){var e;return K(null!==(e=window.catalog)&&void 0!==e&&e.standalone?V.cP.apply(void 0,arguments):A.cP.apply(void 0,arguments))},portfolioId:J,userCapabilities:ee,canLinkOrderProcesses:X}))}),l().createElement(B.Z,{items:oe,isLoading:y||g,renderEmptyState:function(){return l().createElement(F,{handleFilterChange:r,meta:$,userCapabilities:ee,url:t.addProductsRoute})}}),(null==$?void 0:$.count)>0&&l().createElement(N.Z,null,l().createElement(b.Z,{dropDirection:"up",meta:$,apiProps:J,apiRequest:function(){var e;return K(null!==(e=window.catalog)&&void 0!==e&&e.standalone?V.cP.apply(void 0,arguments):A.cP.apply(void 0,arguments))}})))};G.propTypes={routes:c().shape({addProductsRoute:c().string.isRequired,portfolioRoute:c().string.isRequired}).isRequired,handleFilterChange:c().func.isRequired,removeProducts:c().func.isRequired,copyPortfolio:c().func.isRequired,stateDispatch:c().func.isRequired,state:c().shape({removeInProgress:c().bool,isFetching:c().bool,isFiltering:c().bool,copyInProgress:c().bool,selectedItems:c().array,filterValue:c().string}).isRequired,fromProducts:c().bool},G.defaultProps={state:{removeInProgress:!1,isFetching:!1,isFiltering:!1,copyInProgress:!1,selectedItems:[],filterValue:void 0}};const J=G}}]);
//# sourceMappingURL=../sourcemaps/3452.4ba4884fe91baa68c73cfee69d975bef.js.map